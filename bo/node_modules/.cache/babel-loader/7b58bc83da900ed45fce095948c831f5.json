{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Cours\\\\Projets\\\\React\\\\API-BO\\\\bo\\\\src\\\\components\\\\Panel\\\\Publications\\\\index.js\";\nimport React from \"react\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport { getPublications, deleteReports, deletePublication } from \"../../../API/publication\";\nimport \"./style.css\";\n\nclass Publication extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      publications: [],\n      viewReports: false\n    };\n  }\n\n  async componentDidMount() {\n    const results = await getPublications();\n    this.setState({\n      publications: results\n    });\n  }\n\n  async switchReportButton(e) {\n    const results = await getPublications(e.target.checked);\n    this.setState({\n      publications: results,\n      viewReports: e.target.checked\n    });\n  }\n\n  async deleteReports(id) {\n    await deleteReports(id);\n    const results = await getPublications(this.state.viewReports);\n    this.setState({\n      publications: results\n    });\n  }\n\n  async deletePublication(id) {\n    await deletePublication(id);\n    const results = await getPublications(this.state.viewReports);\n    this.setState({\n      publications: results\n    });\n  }\n\n  confirmDeleteReports(e, id) {\n    e.preventDefault();\n    confirmAlert({\n      title: 'Delete reports',\n      message: 'Do you really want to delete reports from this publication ?',\n      buttons: [{\n        label: 'Yes',\n        onClick: async () => await this.deleteReports(id)\n      }, {\n        label: 'No'\n      }]\n    });\n  }\n\n  confirmDeletePublication(e, id) {\n    e.preventDefault();\n    confirmAlert({\n      title: 'Delete Publication',\n      message: 'Do you really want to delete this publication ?',\n      buttons: [{\n        label: 'Yes',\n        onClick: async () => await this.deletePublication(id)\n      }, {\n        label: 'No'\n      }]\n    });\n  }\n\n  tabData() {\n    let publications = this.state.publications;\n    return publications.map((publication, index) => {\n      const {\n        id,\n        content,\n        date,\n        user,\n        nbreports\n      } = publication;\n      let alt = index % 2 === 1 ? \"alt\" : \"\";\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          className: alt,\n          children: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          className: alt,\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          className: alt,\n          children: date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          className: alt,\n          children: nbreports\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          className: alt,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"removeReportsButton\",\n            onClick: async e => await this.confirmDeleteReports(e, id),\n            children: \"\\u270F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          className: alt,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"deleteButton\",\n            onClick: async e => await this.confirmDeletePublication(e, id),\n            children: \"\\uD83D\\uDDD1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"publications\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"publicationsTitle\",\n        children: \"PUBLICATIONS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-switch\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: async e => await this.switchReportButton(e),\n          type: \"checkbox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"viewReported\",\n        children: \"Reported : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email user\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Content\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 40\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 56\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Reports\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 69\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Remove reports\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 85\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 108\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.tabData()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 16\n    }, this);\n  }\n\n}\n\nexport default Publication;","map":{"version":3,"sources":["D:/Cours/Projets/React/API-BO/bo/src/components/Panel/Publications/index.js"],"names":["React","confirmAlert","getPublications","deleteReports","deletePublication","Publication","Component","constructor","props","state","publications","viewReports","componentDidMount","results","setState","switchReportButton","e","target","checked","id","confirmDeleteReports","preventDefault","title","message","buttons","label","onClick","confirmDeletePublication","tabData","map","publication","index","content","date","user","nbreports","alt","render"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport {confirmAlert} from \"react-confirm-alert\";\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nimport {getPublications, deleteReports, deletePublication} from \"../../../API/publication\";\nimport \"./style.css\";\n\nclass Publication extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            publications: [],\n            viewReports: false\n        }\n    }\n\n    async componentDidMount() {\n        const results = await getPublications();\n        this.setState({\n            publications: results\n        });\n    }\n\n    async switchReportButton(e) {\n        const results = await getPublications(e.target.checked);\n        this.setState({\n            publications: results,\n            viewReports: e.target.checked\n        });\n    }\n\n    async deleteReports(id){\n        await deleteReports(id);\n\n        const results = await getPublications(this.state.viewReports);\n        this.setState({\n            publications: results,\n        });\n    }\n\n    async deletePublication(id) {\n        await deletePublication(id);\n        const results = await getPublications(this.state.viewReports);\n        this.setState({\n            publications: results\n        });\n    }\n\n    confirmDeleteReports(e, id){\n        e.preventDefault();\n        confirmAlert({\n            title: 'Delete reports',\n            message: 'Do you really want to delete reports from this publication ?',\n            buttons: [\n                {\n                    label: 'Yes',\n                    onClick: async () => await this.deleteReports(id)\n                },\n                {\n                    label: 'No'\n                }\n            ]\n        });\n    }\n\n    confirmDeletePublication(e, id) {\n        e.preventDefault();\n        confirmAlert({\n            title: 'Delete Publication',\n            message: 'Do you really want to delete this publication ?',\n            buttons: [\n                {\n                    label: 'Yes',\n                    onClick: async () => await this.deletePublication(id)\n                },\n                {\n                    label: 'No'\n                }\n            ]\n        })\n    }\n\n\n    tabData() {\n        let publications = this.state.publications;\n\n        return publications.map((publication, index) => {\n            const {id, content, date, user, nbreports} = publication;\n            let alt = (index % 2) === 1 ? \"alt\" : \"\";\n            return (\n                <tr key={index}>\n                    <td className={alt}>{user}</td>\n                    <td className={alt}>{content}</td>\n                    <td className={alt}>{date}</td>\n                    <td className={alt}>{nbreports}</td>\n                    <td className={alt}>\n                        <button className=\"removeReportsButton\" onClick={async(e) => await this.confirmDeleteReports(e, id)}>✏</button>\n                    </td>\n                    <td className={alt}>\n                        <button className=\"deleteButton\" onClick={async(e) => await this.confirmDeletePublication(e, id)}>🗑</button>\n                    </td>\n                </tr>\n            );\n        });\n    }\n\n    render() {\n        return <div id=\"publications\">\n            <p id=\"publicationsTitle\">PUBLICATIONS</p>\n\n            <label className=\"form-switch\">\n                <input onChange={async (e) => await this.switchReportButton(e)} type=\"checkbox\"/>\n                <i/>\n            </label>\n\n            <p id=\"viewReported\">Reported : </p>\n            <table>\n                <thead>\n                <tr><th>Email user</th><th>Content</th><th>Date</th><th>Reports</th><th>Remove reports</th><th>Delete</th></tr>\n                </thead>\n                <tbody>\n                    {this.tabData()}\n                </tbody>\n            </table>\n        </div>\n    }\n}\n\nexport default Publication;"]},"metadata":{},"sourceType":"module"}