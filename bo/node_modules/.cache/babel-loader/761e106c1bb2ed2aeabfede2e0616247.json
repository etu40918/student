{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Cours\\\\Projets\\\\React\\\\API-BO\\\\bo\\\\src\\\\components\\\\Panel\\\\Schools\\\\index.js\";\nimport React from \"react\";\nimport { getSchools, insertSchool, deleteSchool, editSchool } from \"../../../API/school\";\nimport \"./Schools.css\";\nimport Options from \"./Options\";\nimport { confirmAlert } from \"react-confirm-alert\";\n\nclass Schools extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      schools: [],\n      schoolsDisplay: [],\n      selectedSchool: -1,\n      newSchool: false,\n      editedSchool: -1\n    };\n  }\n\n  async componentDidMount() {\n    const results = await getSchools();\n    this.setState({\n      schools: results,\n      schoolsDisplay: results\n    });\n  }\n\n  search(e) {\n    let searchValue = e.target.value;\n\n    if (searchValue === \"\") {\n      let schoolsDisplay = this.state.schools;\n      this.setState({\n        schoolsDisplay: schoolsDisplay\n      });\n    } else {\n      let schools = this.state.schools;\n      let filteredSchools = schools.filter(school => {\n        return school.address.toLowerCase().includes(searchValue) || school.name.toLowerCase().includes(searchValue);\n      });\n      this.setState({\n        schoolsDisplay: filteredSchools\n      });\n    }\n  }\n\n  selectSchool(schoolId) {\n    this.setState({\n      selectedSchool: schoolId\n    });\n  }\n\n  async deleteSchool(id) {\n    await deleteSchool(id);\n    const results = await getSchools();\n    this.setState({\n      schools: results,\n      schoolsDisplay: results\n    });\n  }\n\n  confirmDeleteSchool(e, id) {\n    e.preventDefault();\n    confirmAlert({\n      title: 'Delete school',\n      message: 'Do you really want to delete this school ?',\n      buttons: [{\n        label: 'Yes',\n        onClick: async () => await this.deleteSchool(id)\n      }, {\n        label: 'No'\n      }]\n    });\n  }\n\n  schoolsTab() {\n    let schools = this.state.schoolsDisplay;\n    return schools.map((school, index) => {\n      const {\n        id,\n        name,\n        address,\n        phonenumber\n      } = school;\n      let alt = index % 2 === 1 ? \"alt\" : \"\";\n\n      if (id === this.state.editedSchool) {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"newRow\",\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"schoolNameInput\",\n              type: \"text\",\n              defaultValue: name,\n              placeholder: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"schoolAddressInput\",\n              type: \"text\",\n              defaultValue: address,\n              placeholder: \"address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"schoolPhoneNumberInput\",\n              type: \"text\",\n              defaultValue: phonenumber,\n              placeholder: \"phonenumber\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: 3\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        className: alt,\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: phonenumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"optionsButton\",\n            onClick: () => this.selectSchool(id),\n            children: \"\\uD83D\\uDDD2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"editButton\",\n            onClick: () => this.editSchool(id),\n            children: \"\\u270F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"deleteButton\",\n            onClick: e => this.confirmDeleteSchool(e, id),\n            children: \"\\uD83D\\uDDD1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this);\n    });\n  }\n\n  editSchool(id) {\n    this.setState({\n      editedSchool: id\n    });\n  }\n\n  closeSaveCancelTd() {\n    this.setState({\n      newSchool: false,\n      editedSchool: -1\n    });\n  }\n\n  createNewSchool() {\n    let tableWrapper = document.getElementById(\"schoolTableWrapper\");\n    tableWrapper.scrollTop = 0;\n    this.setState({\n      newSchool: true\n    });\n  }\n\n  async verifySchool(type) {\n    let schoolName = document.getElementById(\"schoolNameInput\");\n    let schoolAddress = document.getElementById(\"schoolAddressInput\");\n    let schoolPhoneNumber = document.getElementById(\"schoolPhoneNumberInput\");\n    let error = false;\n    error = error ? true : this.verifyField(schoolName, \"\", 50);\n    error = error ? true : this.verifyField(schoolAddress, \"\", 100);\n    error = error ? true : this.verifyField(schoolPhoneNumber, \"\", 12);\n\n    if (!error) {\n      if (type === \"new\") await insertSchool(schoolName.value, schoolAddress.value, schoolPhoneNumber.value);else {\n        await editSchool(this.state.editedSchool, schoolName.value, schoolAddress.value, schoolPhoneNumber.value);\n      }\n      this.closeSaveCancelTd();\n      const results = await getSchools();\n      this.setState({\n        schools: results,\n        schoolsDisplay: results\n      });\n    }\n  }\n\n  verifyField(field, verification, maxLength) {\n    let error = false;\n\n    if (field.value === verification || field.value.length > maxLength) {\n      error = true;\n      field.classList.add(\"errorInput\");\n    } else {\n      field.classList.remove(\"errorInput\");\n    }\n\n    return error;\n  }\n\n  render() {\n    let options = null;\n    if (this.state.selectedSchool !== -1) options = /*#__PURE__*/_jsxDEV(Options, {\n      createNewOption: this.createNewOption,\n      schoolId: this.state.selectedSchool\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 23\n    }, this);\n    let newSchoolRow = null;\n    let lastTd;\n    if (!this.state.newSchool && this.state.editedSchool === -1) lastTd = /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: /*#__PURE__*/_jsxDEV(\"td\", {\n        colSpan: 6,\n        className: \"lastTd\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"addButton\",\n          onClick: () => this.createNewSchool(),\n          children: \"NEW SCHOOL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 23\n    }, this);else {\n      if (this.state.newSchool) {\n        newSchoolRow = /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"newRow\",\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"schoolNameInput\",\n              type: \"text\",\n              placeholder: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"schoolAddressInput\",\n              type: \"text\",\n              placeholder: \"address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"schoolPhoneNumberInput\",\n              type: \"text\",\n              placeholder: \"phonenumber\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: 3\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 33\n        }, this);\n      }\n\n      lastTd = /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colSpan: 6,\n          className: \"lastTd\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"saveNew\",\n            onClick: () => this.verifySchool(this.state.newSchool ? \"new\" : \"edit\"),\n            children: \"SAVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancelNew\",\n            onClick: () => this.closeSaveCancelTd(),\n            children: \"CANCEL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"schools\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"schoolTitle\",\n        children: \"SCHOOLS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"searchBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"searchInput\",\n          type: \"text\",\n          name: \"\",\n          placeholder: \"Search\",\n          onChange: e => this.search(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"searchButton\",\n          onClick: e => e.preventDefault(),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"schoolTableWrapper\",\n        className: \"tableWrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"scroll-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Phone number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 54\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Options\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 75\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 91\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 104\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [newSchoolRow, this.schoolsTab(), lastTd]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }, this), options]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 16\n    }, this);\n  }\n\n}\n\nexport default Schools;","map":{"version":3,"sources":["D:/Cours/Projets/React/API-BO/bo/src/components/Panel/Schools/index.js"],"names":["React","getSchools","insertSchool","deleteSchool","editSchool","Options","confirmAlert","Schools","Component","constructor","props","state","schools","schoolsDisplay","selectedSchool","newSchool","editedSchool","componentDidMount","results","setState","search","e","searchValue","target","value","filteredSchools","filter","school","address","toLowerCase","includes","name","selectSchool","schoolId","id","confirmDeleteSchool","preventDefault","title","message","buttons","label","onClick","schoolsTab","map","index","phonenumber","alt","closeSaveCancelTd","createNewSchool","tableWrapper","document","getElementById","scrollTop","verifySchool","type","schoolName","schoolAddress","schoolPhoneNumber","error","verifyField","field","verification","maxLength","length","classList","add","remove","render","options","createNewOption","newSchoolRow","lastTd"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport {getSchools, insertSchool, deleteSchool, editSchool} from \"../../../API/school\";\n\nimport \"./Schools.css\";\n\nimport Options from \"./Options\";\n\nimport {confirmAlert} from \"react-confirm-alert\";\n\nclass Schools extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            schools: [],\n            schoolsDisplay: [],\n            selectedSchool: -1,\n            newSchool: false,\n            editedSchool: -1\n        }\n    }\n\n    async componentDidMount() {\n        const results = await getSchools();\n        this.setState({\n            schools: results,\n            schoolsDisplay: results\n        });\n    }\n\n    search(e){\n        let searchValue = e.target.value;\n        if(searchValue === \"\"){\n            let schoolsDisplay = this.state.schools;\n            this.setState({schoolsDisplay: schoolsDisplay});\n        } else {\n            let schools = this.state.schools;\n            let filteredSchools = schools.filter((school) => {\n                return school.address.toLowerCase().includes(searchValue)\n                    || school.name.toLowerCase().includes(searchValue);\n            })\n            this.setState({schoolsDisplay: filteredSchools});\n        }\n    }\n\n    selectSchool(schoolId) {\n        this.setState({\n            selectedSchool: schoolId\n        });\n    }\n\n    async deleteSchool(id) {\n        await deleteSchool(id);\n        const results = await getSchools();\n        this.setState({\n            schools: results,\n            schoolsDisplay: results\n        });\n    }\n\n    confirmDeleteSchool(e, id){\n        e.preventDefault();\n        confirmAlert({\n            title: 'Delete school',\n            message: 'Do you really want to delete this school ?',\n            buttons: [\n                {\n                    label: 'Yes',\n                    onClick: async () => await this.deleteSchool(id)\n                },\n                {\n                    label: 'No'\n                }\n            ]\n        });\n    }\n\n    schoolsTab() {\n        let schools = this.state.schoolsDisplay;\n\n        return schools.map((school, index) => {\n            const {id, name, address, phonenumber} = school;\n            let alt = (index % 2) === 1 ? \"alt\" : \"\";\n\n            if(id === this.state.editedSchool){\n                return (<tr className=\"newRow\" key={index}>\n                    <td><input id=\"schoolNameInput\" type=\"text\" defaultValue={name} placeholder=\"name\"/></td>\n                    <td><input id=\"schoolAddressInput\" type=\"text\" defaultValue={address} placeholder=\"address\"/></td>\n                    <td><input id=\"schoolPhoneNumberInput\" type=\"text\" defaultValue={phonenumber} placeholder=\"phonenumber\"/></td>\n                    <td colSpan={3}/>\n                </tr>);\n            }\n\n            return (\n                <tr className={alt} key={index}>\n                    <td>{name}</td>\n                    <td>{address}</td>\n                    <td>{phonenumber}</td>\n                    <td><button className=\"optionsButton\" onClick={() => this.selectSchool(id)}>🗒</button></td>\n                    <td><button className=\"editButton\" onClick={() => this.editSchool(id)}>✏</button></td>\n                    <td><button className=\"deleteButton\" onClick={(e) => this.confirmDeleteSchool(e, id)}>🗑</button></td>\n                </tr>\n            );\n        });\n    }\n\n    editSchool(id){\n        this.setState({\n            editedSchool: id\n        });\n    }\n\n    closeSaveCancelTd(){\n        this.setState({\n            newSchool: false,\n            editedSchool: -1\n        });\n    }\n\n    createNewSchool() {\n        let tableWrapper = document.getElementById(\"schoolTableWrapper\")\n        tableWrapper.scrollTop = 0;\n\n        this.setState({\n            newSchool: true\n        })\n    }\n\n    async verifySchool(type) {\n        let schoolName = document.getElementById(\"schoolNameInput\");\n        let schoolAddress = document.getElementById(\"schoolAddressInput\");\n        let schoolPhoneNumber = document.getElementById(\"schoolPhoneNumberInput\");\n        let error = false;\n\n        error = error ? true : this.verifyField(schoolName, \"\", 50);\n        error = error ? true : this.verifyField(schoolAddress, \"\", 100);\n        error = error ? true : this.verifyField(schoolPhoneNumber, \"\", 12);\n\n        if(!error) {\n            if(type === \"new\")\n                await insertSchool(schoolName.value, schoolAddress.value, schoolPhoneNumber.value);\n            else {\n                await editSchool(this.state.editedSchool, schoolName.value, schoolAddress.value, schoolPhoneNumber.value);\n            }\n\n            this.closeSaveCancelTd();\n            const results = await getSchools();\n            this.setState({\n                schools: results,\n                schoolsDisplay: results\n            });\n        }\n    }\n\n    verifyField(field, verification, maxLength) {\n        let error = false;\n        if (field.value === verification || field.value.length > maxLength){\n            error = true;\n            field.classList.add(\"errorInput\");\n        } else {\n            field.classList.remove(\"errorInput\");\n        }\n\n        return error;\n    }\n\n    render(){\n        let options = null;\n        if(this.state.selectedSchool !== -1)\n            options = <Options createNewOption={this.createNewOption} schoolId={this.state.selectedSchool}/>;\n\n        let newSchoolRow = null;\n\n        let lastTd;\n        if(!this.state.newSchool && this.state.editedSchool === -1)\n            lastTd = (<tr>\n                <td colSpan={6} className=\"lastTd\">\n                    <button className=\"addButton\" onClick={() => this.createNewSchool()}>NEW SCHOOL</button>\n                </td>\n            </tr>);\n        else {\n            if(this.state.newSchool) {\n                newSchoolRow = (<tr className=\"newRow\">\n                    <td><input id=\"schoolNameInput\" type=\"text\" placeholder=\"name\"/></td>\n                    <td><input id=\"schoolAddressInput\" type=\"text\" placeholder=\"address\"/></td>\n                    <td><input id=\"schoolPhoneNumberInput\" type=\"text\" placeholder=\"phonenumber\"/></td>\n                    <td colSpan={3}/>\n                </tr>);\n            }\n            lastTd = (<tr>\n                <td colSpan={6} className=\"lastTd\">\n                    <button className=\"saveNew\" onClick={() => this.verifySchool(this.state.newSchool ? \"new\" : \"edit\")}>SAVE</button>\n                    <button className=\"cancelNew\" onClick={() => this.closeSaveCancelTd()}>CANCEL</button>\n                </td>\n            </tr>);\n        }\n        return <div id=\"schools\">\n            <p className=\"schoolTitle\">SCHOOLS</p>\n\n            <form className=\"searchBox\">\n                <input className=\"searchInput\" type=\"text\" name=\"\" placeholder=\"Search\" onChange={(e) => this.search(e)}/>\n                <button className=\"searchButton\" onClick={(e) => e.preventDefault()}>\n                    <i className=\"fa fa-search\"/>\n                </button>\n            </form>\n            <div id=\"schoolTableWrapper\" className=\"tableWrapper\">\n                <table className=\"scroll-table\">\n                    <thead>\n                    <tr><th>Name</th><th>Address</th><th>Phone number</th><th>Options</th><th>Edit</th><th>Delete</th></tr>\n                    </thead>\n                    <tbody>\n                        {newSchoolRow}\n                        {this.schoolsTab()}\n                        {lastTd}\n                    </tbody>\n                </table>\n            </div>\n            {options}\n        </div>\n    }\n}\n\nexport default Schools;"]},"metadata":{},"sourceType":"module"}